===================================
Output & Results
===================================

Command Line Output
===================
When running the workflow you should see output similar to:

.. code-block:: console

    N E X T F L O W  ~  version 22.10.5
    NOTE: Your local project version looks outdated - a different revision is available in the remote repository [96d78f009f]
    Launching `https://github.com/mriffle/nf-teirex-dda` [ridiculous_mahavira] DSL2 - revision: 39f01e6119 [main]
    executor >  awsbatch (23)
    [58/e7e490] process > wf_comet_percolator:ADD_FASTA_TO_COMET_PARAMS [100%] 1 of 1 ✔
    [skipped  ] process > wf_comet_percolator:MSCONVERT (7)             [100%] 9 of 9, stored: 9 ✔
    [e8/bb3aec] process > wf_comet_percolator:COMET (6)                 [100%] 9 of 9 ✔
    [5e/24ea8a] process > wf_comet_percolator:FILTER_PIN (1)            [100%] 9 of 9 ✔
    [53/bba634] process > wf_comet_percolator:COMBINE_PIN_FILES         [100%] 1 of 1 ✔
    [ae/3899ff] process > wf_comet_percolator:PERCOLATOR                [100%] 1 of 1 ✔
    [d4/d2c311] process > wf_comet_percolator:CONVERT_TO_LIMELIGHT_XML  [100%] 1 of 1 ✔
    [7e/9530ea] process > wf_comet_percolator:UPLOAD_TO_LIMELIGHT       [100%] 1 of 1 ✔
    Completed at: 14-Jun-2023 13:39:38
    Duration    : 18m 53s
    CPU hours   : 3.9
    Succeeded   : 23

The first line shows the version of Nextflow you are running. The second line shows the version of the workflow
you are running. The third line shows the executor you are using. An executor in Nextflow describes the actual
system the steps of the workflow are running on. In this case the *AWS Batch* executor was used.
The next several lines show the actual steps of the workflow as they are running. If a particular step is run
multiple times (e.g., converting many RAW files to mzML using msconvert), the percent complete shows the
percentage of the RAW files that have been converted. The final four lines appear when the workflow completes,
showing the completion time, how long it took, and the number
of steps that succeeded.

Workflow Log
============
The log file called ``.nextflow.log`` will appear in the directory in which the workflow was run. It can be helpful
for determining the cause of any problems. A log file will also be generated for each task executed by the workflow,
which will be described below.

Workflow Results
================
All results will be output to the ``results/nf-teirex-dda`` subdirectory in the directory in which the workflow was
run. In this directory is a subdirectory for each program that was run as part of the workflow. A full description
of output files can be found below.

Output Files
============
Below are each subdirectory created in ``results/nf-teirex-dda`` and a description of files
that will be found in those directories.

``comet`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^
This directory holds logs and output related to running Comet. The following files are present:

- ``add-fasta-to-params.stderr`` - The workflow automatically adds the FASTA file to the comet.params file. This file contains any errors generated by that step.
- ``comet.fasta.params`` - This is the Comet params file in which the FASTA file has been substituted into the file.

Then, for each input scan file (e.g., each input raw file), the following set of files will exist:

- ``scan_file_base.comet.stderr`` - The output of any errors generating by running Comet on this scan file.
- ``scan_file_base.comet.stdout`` - The standard output generated by Comet for this scan file.
- ``scan_file_base.pep.xml`` - The results, in PepXML format, generated by Comet for this scan file.
- ``scan_file_base.pin`` - The Percolator input file generated by Comet for this scan file.

``percolator`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^^^
This directory holds logs and output related to running Percolator. The following files will be present:

The workflow includes a step where the ``.pin`` files (Percolator input files generated by Comet) are filtered to remove all non-rank-one hits. As a result, the following files will exist for each input scan file:

- ``scan_file_base.filtered.pin`` - The filtered ``.pin`` file for this scan file.
- ``scan_file_base.filtered.pin.stderr`` - Any error messages output by the filtering process.

The following files will also be present:

- ``combined.filtered.pin`` - The result of combining all the filtered ``.pin`` files for each scan file into a single ``.pin`` file.
- ``combine-pin.stderr`` - Any error messages output by the process of combining ``.pin`` files.
- ``percolator.stderr`` - Any error messages generated by running Percolator on the combined ``.pin`` file.
- ``percolator.stdout`` - The command line output generated by running Percolator on the combined ``.pin`` file.
- ``combined.filtered.pout.xml`` - The final results in XML format of running Percolator on the combined ``.pin`` file.

``limelight`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^^
This directory holds logs related to Limelight XML conversion and uploading to Limelight. The following files will be present:

- ``limelight-submit-upload.stderr`` - Any error messages generated by uploading the search results to Limelight.
- ``limelight-submit-upload.stdout`` - The standard command line output generated by the program that uploads data to Limelight.
- ``limelight-xml-convert.stderr`` - Any error messages generated by converting the search results to Limelight XML.
- ``limelight-xml-convert.stdout`` - The standard command line output generated by the program that converts search results to Limelight XML.
- ``results.limelight.xml`` - The Limelight XML file generated by converting the search results. This format is necessary for uploading data to Limelight.
